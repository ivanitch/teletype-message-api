# –ü—Ä–∏–º–∏—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

> –†–æ—É—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å:
> ```
> POST http://neo-teletype.app/api/v1/messages
> ```
> 
> –í —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞:
>```json
>{
>  "external_message_id": "message0000000000000000000000000",
>  "external_client_id": "client00000000000000000000000000",
>  "client_phone": "+70000000000",
>  "message_text": "–°–æ–æ–±—â–µ–Ω–∏–µ #1 üëã",
>  "send_at": 1750418650
>}
>```

## üëâ **Postman** (—Ç–µ—Å—Ç–æ–≤—ã–π –≤–Ω–µ—à–Ω–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ –æ–¥–Ω–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é)

–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–µ—Ä–≤–æ–µ –°–æ–æ–±—â–µ–Ω–∏–µ.

–°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ë–î, —Ä–∞–≤–Ω–æ –∫–∞–∫ –∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ö–ª–∏–µ–Ω—Ç, –∞ —Ç–∞–∫ –∂–µ –¥–∏–∞–ª–æ–≥ –¥–ª—è –Ω–µ–≥–æ. –°–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å–ø–µ—à–Ω–æ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –°–æ–æ–±—â–µ–Ω–∏—è:
```json
{
  "success": true,
  "data": {
    "external_client_id": "client00000000000000000000000000",
    "dialog_id": 1,
    "external_message_id": "message0000000000000000000000000",
    "message_text": "–°–æ–æ–±—â–µ–Ω–∏–µ #1 üëã",
    "send_at": 1750418650,
    "id": 1
  },
  "errors": []
}
```

–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –°–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º—Å—è `message_id`, –°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –ë–î, –Ω–æ –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥ –º—ã —Å–¥–µ–ª–∞–µ–º. –°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä–Ω—ë—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
```json
{
  "success": false,
  "data": null,
  "errors": {
    "external_message_id": [
      "–î—É–±–ª–∏–∫–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è!"
    ]
  }
}
```
–û—Ç–ø—Ä–∞–≤–ª—è–µ–º **–≤—Ç–æ—Ä–æ–µ** –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —Ç–æ–≥–æ –∂–µ –ö–ª–∏–µ–Ω—Ç–∞ (–º–µ–Ω—è–µ–º `message_id` –∏ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç –°–æ–æ–±—â–µ–Ω–∏—è):
```json
{
  "external_message_id": "message0000000000000000000000001",  // <-
  "external_client_id": "client00000000000000000000000000",
  "client_phone": "+70000000000",
  "message_text": "–°–æ–æ–±—â–µ–Ω–∏–µ #2 üëã", // üëà
  "send_at": 1750418750
}
```
–°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –±–∞–∑—É, **—Å–∏—Å—Ç–µ–º–∞ –≤–µ—Ä–Ω—É–ª–∞ –Ω—É–∂–Ω—ã–π –Ω–∞–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
```json
{
  "success": true,
  "data": {
    "external_client_id": "client00000000000000000000000000",
    "dialog_id": 1,
    "external_message_id": "message0000000000000000000000001",
    "message_text": "–°–æ–æ–±—â–µ–Ω–∏–µ #2 üëã",
    "send_at": 1750418750,
    "id": 2
  },
  "errors": []
}
```
–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—è–≤–∏–ª–æ—Å—å **–Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** (–∏—Ç–æ–≥–æ - –∏—Ö —É–∂–µ 2), –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ–µ –∫ –∫–ª–∏–µ–Ω—Ç—É `id = 1` –∏ `external_client_id = client00000000000000000000000000`, –ø—Ä–∏ —ç—Ç–æ–º –¥–∏–∞–ª–æ–≥ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –æ–±–Ω–æ–≤–∏–ª—Å—è, —á—Ç–æ –º–æ–∂–Ω–æ –Ω–∞–±–ª—é–¥–∞—Ç—å –≤ –ø–æ–ª–µ `updated_at`. –û–∂–∏–¥–∞–µ–º–æ, –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `clients` –∏ `dialogs` –æ—Å—Ç–∞–ª–∏—Å—å –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º —á–∏—Å–ª–µ (–ö–ª–∏–µ–Ω—Ç = 1, –î–∏–∞–ª–æ–≥ = 1). 

–ü—ã—Ç–∞–µ–º—Å—è –≤–Ω–æ–≤—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–µ–º –∂–µ `message_id` –∏ –æ–∂–∏–¥–∞–µ–º–æ –≤–∏–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥—É–±–ª–∏–∫–∞—Ç–µ. –ó–∞–ø–∏—Å–∞–ª–∏ –≤ –ª–æ–≥, –æ—Ç–±—Ä–æ—Å–∏–ª–∏, –ø–æ—à–ª–∏ –¥–∞–ª—å—à–µ üòâ 

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –∏ –≤ —Å–ª—É—á–∞–µ —Å –Ω–µ–ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –≤–∏–¥–∞: 
```json
{
  "external_message_id": "message0000000000000000000000001",
  "external_client_id": "client00000000000000000000000000"
}
```
–í–∏–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—É—é –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏: 
```json
{
  "success": false,
  "data": null,
  "errors": {
    "client_phone": [
      "Client Phone cannot be blank."
    ],
    "message_text": [
      "Message Text cannot be blank."
    ],
    "send_at": [
      "Send At cannot be blank."
    ]
  }
}
```
–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, —Ç–∞–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –º—ã –ø—Ä–æ–ø—É—Å—Ç–∏–º (–≤ –ë–î –ù–ï –∑–∞–ø–∏—à–µ–º), –Ω–æ –∑–∞–ª–æ–≥–≥–∏—Ä—É–µ–º ‚òùÔ∏è

–î–ª—è —á–∏—Å—Ç–æ—Ç—ã —ç–∫–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –î—Ä—É–≥–æ–≥–æ –ö–ª–∏–µ–Ω—Ç–∞:
```json
{
  "external_message_id": "message0000000000000000000000000",
  "external_client_id": "client00000000000000000000000001",  //üëà
  "client_phone": "+70000000001", // üëà
  "message_text": "–°–æ–æ–±—â–µ–Ω–∏–µ #1 –¥—Ä—É–≥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ üëã", // üëà
  "send_at": 1750418800
}
```
–ü–æ–ª—É—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```json
{
  "success": true,
  "data": {
    "external_client_id": "client00000000000000000000000001",
    "dialog_id": 2,
    "external_message_id": "message0000000000000000000000000",
    "message_text": "–°–æ–æ–±—â–µ–Ω–∏–µ #1 –¥—Ä—É–≥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ üëã",
    "send_at": 1750418800,
    "id": 3
  },
  "errors": []
}
```
–í –ë–î —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –î–≤–∞ –ö–ª–∏–µ–Ω—Ç–∞, –î–≤–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É—é—â–∏—Ö –î–∏–∞–ª–æ–≥–∞ –∏ –¢—Ä–∏ –°–æ–æ–±—â–µ–Ω–∏—è:

###### –ö–ª–∏–µ–Ω—Ç—ã:
![–ö–ª–∏–µ–Ω—Ç—ã](img/clients.png)

###### –î–∏–∞–ª–æ–≥–∏:
![–î–∏–∞–ª–æ–≥–∏](img/dialogs.png)

###### –°–æ–æ–±—â–µ–Ω–∏—è:
![–°–æ–æ–±—â–µ–Ω–∏—è](img/messages.png)